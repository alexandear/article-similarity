swagger: "2.0"
info:
  title: Article similarity API
  version: "1.0.0"
  description: Server to store articles and search similar articles
basePath: /
schemes:
  - http
consumes:
  - application/json

paths:
  /articles:
    post:
      summary: Add an article
      parameters:
        - in: body
          name: body
          schema:
            type: object
            required:
              - content
            properties:
              content:
                description: Article content
                type: string
          required: true
      responses:
        200:
          $ref: "#/responses/ArticleOk"
        400:
          $ref: "#/responses/InvalidArgument"
        500:
          $ref: "#/responses/ServerError"

  /articles/{id}:
    get:
      summary: Get article by id
      parameters:
        - in: path
          name: id
          description: Article id
          type: integer
          format: int64
          required: true
      responses:
        200:
          $ref: "#/responses/ArticleOk"
        400:
          $ref: "#/responses/InvalidArgument"
        404:
          description: Article not found
          schema:
            $ref: '#/definitions/Error'
        500:
          $ref: "#/responses/ServerError"

definitions:
  Error:
    type: object
    properties:
      code:
        type: integer
        format: int64
      message:
        type: string
    required:
      - message

responses:
  ArticleOk:
    description: OK
    schema:
      type: object
      properties:
        id:
          description: Article id
          type: integer
          format: int64
        content:
          description: Article content
          type: string
        duplicate_article_ids:
          type: array
          items:
            type: integer
      required:
        - id
        - content
        - duplicate_article_ids

  InvalidArgument:
    description: Invalid arguments
    schema:
      $ref: '#/definitions/Error'

  ServerError:
    description: Internal server error
    schema:
      $ref: "#/definitions/Error"
